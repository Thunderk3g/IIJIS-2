(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"7wo0":function(e,t,o){"use strict";o.r(t),o.d(t,"SettingsModule",function(){return N});var s=o("ofXK"),r=o("r7Mf"),i=o("3Pt+"),n=o("tyNb"),a=o("fXoL"),b=o("jhN1"),l=o("qfBg"),c=o("5eHb"),d=o("0ygI"),u=o("IfdK"),m=o("RZXS");function f(e,t){if(1&e&&a.Pb(0,"img",57),2&e){const e=a.fc();a.lc("src",e.imageToShow,a.xc)}}function g(e,t){1&e&&a.Pb(0,"img",58)}const p=function(){return["/releases"]};function h(e,t){1&e&&(a.Ub(0,"li"),a.Ub(1,"a",6),a.Pb(2,"i",59),a.Ub(3,"span"),a.Dc(4,"Releases"),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(1),a.lc("routerLink",a.oc(1,p)))}const U=function(){return["/submissions"]};function T(e,t){1&e&&(a.Ub(0,"li"),a.Ub(1,"a",6),a.Pb(2,"i",60),a.Ub(3,"span"),a.Dc(4,"Submissions"),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(1),a.lc("routerLink",a.oc(1,U)))}function v(e,t){if(1&e&&(a.Ub(0,"option",61),a.Dc(1),a.Tb()),2&e){const e=t.$implicit;a.mc("value",e.code),a.Cb(1),a.Ec(e.name)}}const w=function(){return[""]},C=function(){return["settings"]},j=function(){return["/settings"]},P=function(){return["/logout"]},S=[{path:"",component:(()=>{class e{constructor(e,t,o,s,r,i,n){this.sanitizer=e,this.userService=t,this.toastr=o,this.fb=s,this.utilsService=r,this.sessionService=i,this.submissionService=n,this.filename="Upload your photo here",this.init(),this.initResetForm(),this.initUpdateForm()}ngOnInit(){}init(){null!==localStorage.getItem("userdata")?(this.loggedin=!0,this.userdata=JSON.parse(localStorage.getItem("userdata")),this.loadImage()):(this.loggedin=!1,this.userdata=null)}initResetForm(){this.resetPasswordForm=this.fb.group({oldpassword:new i.f("",[i.t.required,i.t.minLength(8)]),password:new i.f("",[i.t.required,i.t.minLength(8)]),confirmPassword:new i.f("",[i.t.required,i.t.minLength(8)])})}initUpdateForm(){this.updateDetailsForm=this.fb.group({firstName:new i.f("",[i.t.required]),lastName:new i.f("",[i.t.required]),affiliation:new i.f("",[i.t.required]),country:new i.f("",[i.t.required]),email:new i.f("",[i.t.required,i.t.email]),phone:new i.f("",[i.t.required,i.t.pattern(/^[6-9]\d{9}$/)])}),this.utilsService.getCountries().subscribe(e=>{this.countries=e.body.countries})}update(){this.userService.update(this.userdata).subscribe(e=>{this.toastr.success("User updated!","Success"),localStorage.setItem("userdata",JSON.stringify(e.body)),this.sessionService.setuser(!0)},e=>{this.toastr.error("Updating user failed!","Server Error!")})}changepassword(){this.resetPasswordForm.controls.oldpassword.invalid||this.resetPasswordForm.controls.password.invalid||this.resetPasswordForm.controls.confirmPassword.invalid?this.toastr.error("Please enter all form fields","Validation Error!"):(this.userdata.oldPassword=this.resetPasswordForm.controls.oldpassword.value,this.userdata.password=this.resetPasswordForm.controls.password.value,this.userdata.confirmPassword=this.resetPasswordForm.controls.confirmPassword.value,this.userService.changepassword(this.userdata).subscribe(e=>{this.toastr.success("Password updated!","Success"),localStorage.setItem("userdata",JSON.stringify(e.body.data)),this.sessionService.setuser(!0)},e=>{"Conflict"===e&&this.toastr.error("Password and Confirm Password do not match!","Server Error!"),"Bad Request"===e&&this.toastr.error("Incorrect Old Password!","Server Error!")}))}uploadDocument(e){this.file=e,this.filename=e.name}uploadFileToActivity(){this.submissionService.uploadsubmissionimage(this.file,this.userdata.id).subscribe(e=>{this.toastr.success("Profile picture updated!","Success"),localStorage.setItem("userdata",JSON.stringify(e.body.data)),this.sessionService.setuser(!0),this.loadImage(),this.uploaded=!0},e=>{this.toastr.error("Updating image failed!","Server Error!")})}updateImage(){void 0===this.file?this.toastr.error("Please upload a picture!","Error!"):this.uploadFileToActivity()}loadImage(){null!=this.userdata.file&&this.userService.getImage(this.userdata.id).subscribe(e=>{let t=URL.createObjectURL(e);this.imageToShow=this.sanitizer.bypassSecurityTrustUrl(t)},e=>{console.log(e)})}scroll(e){e.scrollIntoView({behavior:"smooth"})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b.b),a.Ob(l.a),a.Ob(c.b),a.Ob(i.e),a.Ob(d.a),a.Ob(u.a),a.Ob(m.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-settings"]],decls:126,vars:24,consts:[[1,"sj-innerbanner"],[1,"container"],[1,"row"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"sj-innerbannercontent"],[1,"sj-breadcrumb"],[3,"routerLink"],["id","sj-main",1,"sj-main","sj-haslayout","sj-sectionspace"],["id","sj-twocolumns",1,"sj-twocolumns"],[1,"col-12","col-sm-12","col-md-12","col-lg-4","col-xl-3","float-left"],["id","sj-asidebar",1,"sj-asidebar","sj-widgetbox"],[1,"sj-widgetprofile"],[1,"sj-widgetcontent"],["alt","image description",3,"src",4,"ngIf"],["src","../../assets/images/thumbnails/img-02.png","alt","image description",4,"ngIf"],[1,"sj-btnedite",3,"click"],[1,"lnr","lnr-pencil"],[1,"sj-admininfo"],[1,"sj-widgetdashboard"],["id","sj-dashboardnav",1,"sj-dashboardnav"],[4,"ngIf"],[1,"lnr","lnr-lock"],[1,"lnr","lnr-exit"],[1,"col-12","col-sm-12","col-md-12","col-lg-8","col-xl-9","float-right"],["id","sj-content",1,"sj-content"],[1,"sj-addarticleholdcontent"],[1,"sj-dashboardboxtitle"],[1,"sj-acsettingthold"],[1,"sj-formtheme","sj-formpassword",3,"formGroup","ngSubmit"],["updateform",""],[1,"form-group"],["type","text","name","firstName","formControlName","firstName","placeholder","First Name*",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","lastName","formControlName","lastName","placeholder","Last Name*",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","affiliation","formControlName","affiliation","placeholder","Affiliation*",1,"form-control",3,"ngModel","ngModelChange"],["name","country","formControlName","country",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","email","name","email","formControlName","email","placeholder","Email*","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","phone","formControlName","phone","placeholder","Phone*",1,"form-control",3,"ngModel","ngModelChange"],[1,"sj-btnarea","sj-updatebtns"],["type","submit",1,"sj-btn","sj-btnactive"],[1,"sj-btncancel"],[1,"form-group","sj-inputwithicon","sj-password"],["type","password","name","oldpassword","formControlName","oldpassword","placeholder","Old Password",1,"form-control"],["type","password","name","password","formControlName","password","placeholder","New Password",1,"form-control"],["type","password","name","confirmPassword","formControlName","confirmPassword","placeholder","Retype Password",1,"form-control"],["profilepicture",""],[1,"sj-uploadimgbars"],[1,"sj-inputtyfile"],[1,"sj-title"],["for","sj-uploadimgvtwo"],[1,"ti-upload"],["type","file","name","uploadimgvtwo","id","sj-uploadimgvtwo",3,"change"],["file",""],[1,"sj-filedetails"],[1,"sj-btn","sj-btnactive",3,"click"],["href","javascript:void(0);",1,"sj-btncancel"],["alt","image description",3,"src"],["src","../../assets/images/thumbnails/img-02.png","alt","image description"],[1,"lnr","lnr-sync"],[1,"lnr","lnr-layers"],[3,"value"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"div",4),a.Ub(5,"h1"),a.Dc(6,"Settings"),a.Tb(),a.Ub(7,"ol",5),a.Ub(8,"li"),a.Ub(9,"a",6),a.Dc(10,"Home"),a.Tb(),a.Tb(),a.Ub(11,"li"),a.Ub(12,"a",6),a.Dc(13,"Settings"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(14,"main",7),a.Ub(15,"div",1),a.Ub(16,"div",2),a.Ub(17,"div",8),a.Ub(18,"div",9),a.Ub(19,"aside",10),a.Ub(20,"div",11),a.Ub(21,"div",12),a.Ub(22,"figure"),a.Cc(23,f,1,1,"img",13),a.Cc(24,g,1,0,"img",14),a.Ub(25,"button",15),a.bc("click",function(){a.vc(e);const o=a.sc(99);return t.scroll(o)}),a.Pb(26,"i",16),a.Tb(),a.Tb(),a.Ub(27,"div",17),a.Ub(28,"h3"),a.Dc(29),a.Tb(),a.Ub(30,"h4"),a.Dc(31),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(32,"div",18),a.Ub(33,"nav",19),a.Ub(34,"ul"),a.Cc(35,h,5,2,"li",20),a.Cc(36,T,5,2,"li",20),a.Ub(37,"li"),a.Ub(38,"a",6),a.Pb(39,"i",21),a.Ub(40,"span"),a.Dc(41,"Account Settings"),a.Tb(),a.Tb(),a.Tb(),a.Ub(42,"li"),a.Ub(43,"a",6),a.Pb(44,"i",22),a.Ub(45,"span"),a.Dc(46,"Logout"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(47,"div",23),a.Ub(48,"div",24),a.Ub(49,"div",25),a.Ub(50,"div",26),a.Ub(51,"h2"),a.Dc(52,"Account Settings"),a.Tb(),a.Tb(),a.Ub(53,"div",27),a.Ub(54,"form",28,29),a.bc("ngSubmit",function(){return t.update()}),a.Ub(56,"fieldset"),a.Ub(57,"div",30),a.Ub(58,"input",31),a.bc("ngModelChange",function(e){return t.userdata.firstName=e}),a.Tb(),a.Tb(),a.Ub(59,"div",30),a.Ub(60,"input",32),a.bc("ngModelChange",function(e){return t.userdata.lastName=e}),a.Tb(),a.Tb(),a.Ub(61,"div",30),a.Ub(62,"input",33),a.bc("ngModelChange",function(e){return t.userdata.affiliation=e}),a.Tb(),a.Tb(),a.Ub(63,"div",30),a.Ub(64,"select",34),a.bc("ngModelChange",function(e){return t.userdata.country=e}),a.Ub(65,"option",35),a.Dc(66,"Select Country"),a.Tb(),a.Cc(67,v,2,2,"option",36),a.Tb(),a.Tb(),a.Ub(68,"div",30),a.Ub(69,"input",37),a.bc("ngModelChange",function(e){return t.userdata.email=e}),a.Tb(),a.Tb(),a.Ub(70,"div",30),a.Ub(71,"input",38),a.bc("ngModelChange",function(e){return t.userdata.phone=e}),a.Tb(),a.Tb(),a.Tb(),a.Ub(72,"div",39),a.Ub(73,"button",40),a.Dc(74,"Update Now"),a.Tb(),a.Ub(75,"button",41),a.Dc(76,"Cancel"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(77,"div",25),a.Ub(78,"div",26),a.Ub(79,"h2"),a.Dc(80,"Change Password"),a.Tb(),a.Tb(),a.Ub(81,"div",27),a.Ub(82,"form",28),a.bc("ngSubmit",function(){return t.changepassword()}),a.Ub(83,"fieldset"),a.Ub(84,"div",42),a.Pb(85,"i",21),a.Pb(86,"input",43),a.Tb(),a.Ub(87,"div",42),a.Pb(88,"i",21),a.Pb(89,"input",44),a.Tb(),a.Ub(90,"div",42),a.Pb(91,"i",21),a.Pb(92,"input",45),a.Tb(),a.Tb(),a.Ub(93,"div",39),a.Ub(94,"button",40),a.Dc(95,"Update Now"),a.Tb(),a.Ub(96,"button",41),a.Dc(97,"Cancel"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(98,"div",25,46),a.Ub(100,"div",26),a.Ub(101,"h2"),a.Dc(102,"Profile Photo"),a.Tb(),a.Tb(),a.Ub(103,"div",27),a.Ub(104,"div",47),a.Ub(105,"div",48),a.Ub(106,"div",49),a.Ub(107,"h3"),a.Dc(108,"Upload Photo"),a.Tb(),a.Tb(),a.Ub(109,"label",50),a.Ub(110,"span"),a.Dc(111),a.Tb(),a.Ub(112,"span"),a.Pb(113,"i",51),a.Tb(),a.Ub(114,"input",52,53),a.bc("change",function(e){return t.uploadDocument(e.target.files[0])}),a.Tb(),a.Tb(),a.Ub(116,"div",54),a.Ub(117,"span"),a.Dc(118,"File should be max 2MB "),a.Tb(),a.Ub(119,"em"),a.Dc(120,"Not Uploaded Yet"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(121,"div",39),a.Ub(122,"button",55),a.bc("click",function(){return t.updateImage()}),a.Dc(123,"Update Now"),a.Tb(),a.Ub(124,"button",56),a.Dc(125,"Cancel"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(9),a.lc("routerLink",a.oc(20,w)),a.Cb(3),a.lc("routerLink",a.oc(21,C)),a.Cb(11),a.lc("ngIf",void 0!==t.userdata.file),a.Cb(1),a.lc("ngIf",void 0===t.userdata.file),a.Cb(5),a.Ec(t.userdata.firstName+" "+t.userdata.lastName),a.Cb(2),a.Ec(t.userdata.affiliation),a.Cb(4),a.lc("ngIf","admin"===(null==t.userdata?null:t.userdata.role)),a.Cb(1),a.lc("ngIf","user"===(null==t.userdata?null:t.userdata.role)),a.Cb(2),a.lc("routerLink",a.oc(22,j)),a.Cb(5),a.lc("routerLink",a.oc(23,P)),a.Cb(11),a.lc("formGroup",t.updateDetailsForm),a.Cb(4),a.lc("ngModel",t.userdata.firstName),a.Cb(2),a.lc("ngModel",t.userdata.lastName),a.Cb(2),a.lc("ngModel",t.userdata.affiliation),a.Cb(2),a.lc("ngModel",t.userdata.country),a.Cb(3),a.lc("ngForOf",t.countries),a.Cb(2),a.lc("ngModel",t.userdata.email),a.Cb(2),a.lc("ngModel",t.userdata.phone),a.Cb(11),a.lc("formGroup",t.resetPasswordForm),a.Cb(29),a.Ec(t.filename))},directives:[n.f,s.l,i.v,i.n,i.h,i.d,i.m,i.g,i.s,i.q,i.u,s.k],styles:[".sj-innerbannercontent[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;float:left;color:#fff;font-size:16px;font-weight:500;line-height:16px}img[_ngcontent-%COMP%]{aspect-ratio:1/1}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({imports:[[n.g.forChild(S)],n.g]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({imports:[[s.c,r.a,i.i,i.r,y]]}),e})()}}]);