!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"7wo0":function(o,i,n){"use strict";n.r(i),n.d(i,"SettingsModule",function(){return F});var r=n("ofXK"),a=n("r7Mf"),s=n("3Pt+"),b=n("tyNb"),l=n("fXoL"),c=n("jhN1"),d=n("qfBg"),u=n("5eHb"),f=n("0ygI"),m=n("IfdK"),p=n("RZXS");function g(e,t){if(1&e&&l.Pb(0,"img",57),2&e){var o=l.fc();l.lc("src",o.imageToShow,l.xc)}}function h(e,t){1&e&&l.Pb(0,"img",58)}var v=function(){return["/releases"]};function U(e,t){1&e&&(l.Ub(0,"li"),l.Ub(1,"a",6),l.Pb(2,"i",59),l.Ub(3,"span"),l.Dc(4,"Releases"),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(1),l.lc("routerLink",l.oc(1,v)))}var T=function(){return["/submissions"]};function w(e,t){1&e&&(l.Ub(0,"li"),l.Ub(1,"a",6),l.Pb(2,"i",60),l.Ub(3,"span"),l.Dc(4,"Submissions"),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(1),l.lc("routerLink",l.oc(1,T)))}function C(e,t){if(1&e&&(l.Ub(0,"option",61),l.Dc(1),l.Tb()),2&e){var o=t.$implicit;l.mc("value",o.code),l.Cb(1),l.Ec(o.name)}}var y,j,P,S=function(){return[""]},N=function(){return["settings"]},M=function(){return["/settings"]},D=function(){return["/logout"]},k=[{path:"",component:(y=function(){function o(t,i,n,r,a,s,b){e(this,o),this.sanitizer=t,this.userService=i,this.toastr=n,this.fb=r,this.utilsService=a,this.sessionService=s,this.submissionService=b,this.filename="Upload your photo here",this.init(),this.initResetForm(),this.initUpdateForm()}var i,n,r;return i=o,(n=[{key:"ngOnInit",value:function(){}},{key:"init",value:function(){null!==localStorage.getItem("userdata")?(this.loggedin=!0,this.userdata=JSON.parse(localStorage.getItem("userdata")),this.loadImage()):(this.loggedin=!1,this.userdata=null)}},{key:"initResetForm",value:function(){this.resetPasswordForm=this.fb.group({oldpassword:new s.f("",[s.t.required,s.t.minLength(8)]),password:new s.f("",[s.t.required,s.t.minLength(8)]),confirmPassword:new s.f("",[s.t.required,s.t.minLength(8)])})}},{key:"initUpdateForm",value:function(){var e=this;this.updateDetailsForm=this.fb.group({firstName:new s.f("",[s.t.required]),lastName:new s.f("",[s.t.required]),affiliation:new s.f("",[s.t.required]),country:new s.f("",[s.t.required]),email:new s.f("",[s.t.required,s.t.email]),phone:new s.f("",[s.t.required,s.t.pattern(/^[6-9]\d{9}$/)])}),this.utilsService.getCountries().subscribe(function(t){e.countries=t.body.countries})}},{key:"update",value:function(){var e=this;this.userService.update(this.userdata).subscribe(function(t){e.toastr.success("User updated!","Success"),localStorage.setItem("userdata",JSON.stringify(t.body)),e.sessionService.setuser(!0)},function(t){e.toastr.error("Updating user failed!","Server Error!")})}},{key:"changepassword",value:function(){var e=this;this.resetPasswordForm.controls.oldpassword.invalid||this.resetPasswordForm.controls.password.invalid||this.resetPasswordForm.controls.confirmPassword.invalid?this.toastr.error("Please enter all form fields","Validation Error!"):(this.userdata.oldPassword=this.resetPasswordForm.controls.oldpassword.value,this.userdata.password=this.resetPasswordForm.controls.password.value,this.userdata.confirmPassword=this.resetPasswordForm.controls.confirmPassword.value,this.userService.changepassword(this.userdata).subscribe(function(t){e.toastr.success("Password updated!","Success"),localStorage.setItem("userdata",JSON.stringify(t.body.data)),e.sessionService.setuser(!0)},function(t){"Conflict"===t&&e.toastr.error("Password and Confirm Password do not match!","Server Error!"),"Bad Request"===t&&e.toastr.error("Incorrect Old Password!","Server Error!")}))}},{key:"uploadDocument",value:function(e){this.file=e,this.filename=e.name}},{key:"uploadFileToActivity",value:function(){var e=this;this.submissionService.uploadsubmissionimage(this.file,this.userdata.id).subscribe(function(t){e.toastr.success("Profile picture updated!","Success"),localStorage.setItem("userdata",JSON.stringify(t.body.data)),e.sessionService.setuser(!0),e.loadImage(),e.uploaded=!0},function(t){e.toastr.error("Updating image failed!","Server Error!")})}},{key:"updateImage",value:function(){void 0===this.file?this.toastr.error("Please upload a picture!","Error!"):this.uploadFileToActivity()}},{key:"loadImage",value:function(){var e=this;null!=this.userdata.file&&this.userService.getImage(this.userdata.id).subscribe(function(t){var o=URL.createObjectURL(t);e.imageToShow=e.sanitizer.bypassSecurityTrustUrl(o)},function(e){console.log(e)})}},{key:"scroll",value:function(e){e.scrollIntoView({behavior:"smooth"})}}])&&t(i.prototype,n),r&&t(i,r),o}(),y.\u0275fac=function(e){return new(e||y)(l.Ob(c.b),l.Ob(d.a),l.Ob(u.b),l.Ob(s.e),l.Ob(f.a),l.Ob(m.a),l.Ob(p.a))},y.\u0275cmp=l.Ib({type:y,selectors:[["app-settings"]],decls:126,vars:24,consts:[[1,"sj-innerbanner"],[1,"container"],[1,"row"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"sj-innerbannercontent"],[1,"sj-breadcrumb"],[3,"routerLink"],["id","sj-main",1,"sj-main","sj-haslayout","sj-sectionspace"],["id","sj-twocolumns",1,"sj-twocolumns"],[1,"col-12","col-sm-12","col-md-12","col-lg-4","col-xl-3","float-left"],["id","sj-asidebar",1,"sj-asidebar","sj-widgetbox"],[1,"sj-widgetprofile"],[1,"sj-widgetcontent"],["alt","image description",3,"src",4,"ngIf"],["src","../../assets/images/thumbnails/img-02.png","alt","image description",4,"ngIf"],[1,"sj-btnedite",3,"click"],[1,"lnr","lnr-pencil"],[1,"sj-admininfo"],[1,"sj-widgetdashboard"],["id","sj-dashboardnav",1,"sj-dashboardnav"],[4,"ngIf"],[1,"lnr","lnr-lock"],[1,"lnr","lnr-exit"],[1,"col-12","col-sm-12","col-md-12","col-lg-8","col-xl-9","float-right"],["id","sj-content",1,"sj-content"],[1,"sj-addarticleholdcontent"],[1,"sj-dashboardboxtitle"],[1,"sj-acsettingthold"],[1,"sj-formtheme","sj-formpassword",3,"formGroup","ngSubmit"],["updateform",""],[1,"form-group"],["type","text","name","firstName","formControlName","firstName","placeholder","First Name*",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","lastName","formControlName","lastName","placeholder","Last Name*",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","affiliation","formControlName","affiliation","placeholder","Affiliation*",1,"form-control",3,"ngModel","ngModelChange"],["name","country","formControlName","country",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","email","name","email","formControlName","email","placeholder","Email*","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","phone","formControlName","phone","placeholder","Phone*",1,"form-control",3,"ngModel","ngModelChange"],[1,"sj-btnarea","sj-updatebtns"],["type","submit",1,"sj-btn","sj-btnactive"],[1,"sj-btncancel"],[1,"form-group","sj-inputwithicon","sj-password"],["type","password","name","oldpassword","formControlName","oldpassword","placeholder","Old Password",1,"form-control"],["type","password","name","password","formControlName","password","placeholder","New Password",1,"form-control"],["type","password","name","confirmPassword","formControlName","confirmPassword","placeholder","Retype Password",1,"form-control"],["profilepicture",""],[1,"sj-uploadimgbars"],[1,"sj-inputtyfile"],[1,"sj-title"],["for","sj-uploadimgvtwo"],[1,"ti-upload"],["type","file","name","uploadimgvtwo","id","sj-uploadimgvtwo",3,"change"],["file",""],[1,"sj-filedetails"],[1,"sj-btn","sj-btnactive",3,"click"],["href","javascript:void(0);",1,"sj-btncancel"],["alt","image description",3,"src"],["src","../../assets/images/thumbnails/img-02.png","alt","image description"],[1,"lnr","lnr-sync"],[1,"lnr","lnr-layers"],[3,"value"]],template:function(e,t){if(1&e){var o=l.Vb();l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"div",4),l.Ub(5,"h1"),l.Dc(6,"Settings"),l.Tb(),l.Ub(7,"ol",5),l.Ub(8,"li"),l.Ub(9,"a",6),l.Dc(10,"Home"),l.Tb(),l.Tb(),l.Ub(11,"li"),l.Ub(12,"a",6),l.Dc(13,"Settings"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(14,"main",7),l.Ub(15,"div",1),l.Ub(16,"div",2),l.Ub(17,"div",8),l.Ub(18,"div",9),l.Ub(19,"aside",10),l.Ub(20,"div",11),l.Ub(21,"div",12),l.Ub(22,"figure"),l.Cc(23,g,1,1,"img",13),l.Cc(24,h,1,0,"img",14),l.Ub(25,"button",15),l.bc("click",function(){l.vc(o);var e=l.sc(99);return t.scroll(e)}),l.Pb(26,"i",16),l.Tb(),l.Tb(),l.Ub(27,"div",17),l.Ub(28,"h3"),l.Dc(29),l.Tb(),l.Ub(30,"h4"),l.Dc(31),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(32,"div",18),l.Ub(33,"nav",19),l.Ub(34,"ul"),l.Cc(35,U,5,2,"li",20),l.Cc(36,w,5,2,"li",20),l.Ub(37,"li"),l.Ub(38,"a",6),l.Pb(39,"i",21),l.Ub(40,"span"),l.Dc(41,"Account Settings"),l.Tb(),l.Tb(),l.Tb(),l.Ub(42,"li"),l.Ub(43,"a",6),l.Pb(44,"i",22),l.Ub(45,"span"),l.Dc(46,"Logout"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(47,"div",23),l.Ub(48,"div",24),l.Ub(49,"div",25),l.Ub(50,"div",26),l.Ub(51,"h2"),l.Dc(52,"Account Settings"),l.Tb(),l.Tb(),l.Ub(53,"div",27),l.Ub(54,"form",28,29),l.bc("ngSubmit",function(){return t.update()}),l.Ub(56,"fieldset"),l.Ub(57,"div",30),l.Ub(58,"input",31),l.bc("ngModelChange",function(e){return t.userdata.firstName=e}),l.Tb(),l.Tb(),l.Ub(59,"div",30),l.Ub(60,"input",32),l.bc("ngModelChange",function(e){return t.userdata.lastName=e}),l.Tb(),l.Tb(),l.Ub(61,"div",30),l.Ub(62,"input",33),l.bc("ngModelChange",function(e){return t.userdata.affiliation=e}),l.Tb(),l.Tb(),l.Ub(63,"div",30),l.Ub(64,"select",34),l.bc("ngModelChange",function(e){return t.userdata.country=e}),l.Ub(65,"option",35),l.Dc(66,"Select Country"),l.Tb(),l.Cc(67,C,2,2,"option",36),l.Tb(),l.Tb(),l.Ub(68,"div",30),l.Ub(69,"input",37),l.bc("ngModelChange",function(e){return t.userdata.email=e}),l.Tb(),l.Tb(),l.Ub(70,"div",30),l.Ub(71,"input",38),l.bc("ngModelChange",function(e){return t.userdata.phone=e}),l.Tb(),l.Tb(),l.Tb(),l.Ub(72,"div",39),l.Ub(73,"button",40),l.Dc(74,"Update Now"),l.Tb(),l.Ub(75,"button",41),l.Dc(76,"Cancel"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(77,"div",25),l.Ub(78,"div",26),l.Ub(79,"h2"),l.Dc(80,"Change Password"),l.Tb(),l.Tb(),l.Ub(81,"div",27),l.Ub(82,"form",28),l.bc("ngSubmit",function(){return t.changepassword()}),l.Ub(83,"fieldset"),l.Ub(84,"div",42),l.Pb(85,"i",21),l.Pb(86,"input",43),l.Tb(),l.Ub(87,"div",42),l.Pb(88,"i",21),l.Pb(89,"input",44),l.Tb(),l.Ub(90,"div",42),l.Pb(91,"i",21),l.Pb(92,"input",45),l.Tb(),l.Tb(),l.Ub(93,"div",39),l.Ub(94,"button",40),l.Dc(95,"Update Now"),l.Tb(),l.Ub(96,"button",41),l.Dc(97,"Cancel"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(98,"div",25,46),l.Ub(100,"div",26),l.Ub(101,"h2"),l.Dc(102,"Profile Photo"),l.Tb(),l.Tb(),l.Ub(103,"div",27),l.Ub(104,"div",47),l.Ub(105,"div",48),l.Ub(106,"div",49),l.Ub(107,"h3"),l.Dc(108,"Upload Photo"),l.Tb(),l.Tb(),l.Ub(109,"label",50),l.Ub(110,"span"),l.Dc(111),l.Tb(),l.Ub(112,"span"),l.Pb(113,"i",51),l.Tb(),l.Ub(114,"input",52,53),l.bc("change",function(e){return t.uploadDocument(e.target.files[0])}),l.Tb(),l.Tb(),l.Ub(116,"div",54),l.Ub(117,"span"),l.Dc(118,"File should be max 2MB "),l.Tb(),l.Ub(119,"em"),l.Dc(120,"Not Uploaded Yet"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(121,"div",39),l.Ub(122,"button",55),l.bc("click",function(){return t.updateImage()}),l.Dc(123,"Update Now"),l.Tb(),l.Ub(124,"button",56),l.Dc(125,"Cancel"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&e&&(l.Cb(9),l.lc("routerLink",l.oc(20,S)),l.Cb(3),l.lc("routerLink",l.oc(21,N)),l.Cb(11),l.lc("ngIf",void 0!==t.userdata.file),l.Cb(1),l.lc("ngIf",void 0===t.userdata.file),l.Cb(5),l.Ec(t.userdata.firstName+" "+t.userdata.lastName),l.Cb(2),l.Ec(t.userdata.affiliation),l.Cb(4),l.lc("ngIf","admin"===(null==t.userdata?null:t.userdata.role)),l.Cb(1),l.lc("ngIf","user"===(null==t.userdata?null:t.userdata.role)),l.Cb(2),l.lc("routerLink",l.oc(22,M)),l.Cb(5),l.lc("routerLink",l.oc(23,D)),l.Cb(11),l.lc("formGroup",t.updateDetailsForm),l.Cb(4),l.lc("ngModel",t.userdata.firstName),l.Cb(2),l.lc("ngModel",t.userdata.lastName),l.Cb(2),l.lc("ngModel",t.userdata.affiliation),l.Cb(2),l.lc("ngModel",t.userdata.country),l.Cb(3),l.lc("ngForOf",t.countries),l.Cb(2),l.lc("ngModel",t.userdata.email),l.Cb(2),l.lc("ngModel",t.userdata.phone),l.Cb(11),l.lc("formGroup",t.resetPasswordForm),l.Cb(29),l.Ec(t.filename))},directives:[b.f,r.l,s.v,s.n,s.h,s.d,s.m,s.g,s.s,s.q,s.u,r.k],styles:[".sj-innerbannercontent[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;float:left;color:#fff;font-size:16px;font-weight:500;line-height:16px}img[_ngcontent-%COMP%]{aspect-ratio:1/1}"]}),y)}],I=((P=function t(){e(this,t)}).\u0275fac=function(e){return new(e||P)},P.\u0275mod=l.Mb({type:P}),P.\u0275inj=l.Lb({imports:[[b.g.forChild(k)],b.g]}),P),F=((j=function t(){e(this,t)}).\u0275fac=function(e){return new(e||j)},j.\u0275mod=l.Mb({type:j}),j.\u0275inj=l.Lb({imports:[[r.c,a.a,s.i,s.r,I]]}),j)}}])}();